{% extends "base.html" %}
{% load static %}

{% block content %}
<form method="GET">
  <input type="text" name="q" placeholder="Query..." required>
</form>

{% if clips %}
<h2>Results for "{{ query }}":</h2>
<div class="clip-grid">
  {% for clip in clips %}
  <div class="clip-card preview-container video-preview" data-video-id="{{ clip.video.media_url }}" data-start-time="{{ start_time }}" data-start-frame="{{ clip.start_frame }}" data-end-frame="{{ clip.end_frame }}" data-fps="{{ clip.video.fps }}">
    <img src="{% static 'Unbenannt.PNG' %}" alt="Clip" class="thumbnail">
    <div class="video-overlay">
      <div class="progress-bar">
        <div class="hit-area"></div>
        <div class="progress-fill"></div>
        <div class="progress-knob"></div>
      </div>
      <span class="time-left">0:00</span>
    </div>
  </div>
  {% endfor %}
</div>

<div id="video-pool" style="display:none;">
  {% for video_url in video_ids %}
    <video id="{{ video_url }}" muted playsinline preload="auto" src="{{ video_url }}"></video>
  {% endfor %}
</div>

{% elif query %}
<p>No clips found matching "{{ query }}".</p>
{% endif %}

<script src="{% static 'js/video-preview.js' %}"></script>
{% endblock %}